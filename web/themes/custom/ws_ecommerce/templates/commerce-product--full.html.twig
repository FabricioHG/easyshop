{#
/**
 * @file
 *
 * Default product template.
 *
 * Available variables:
 * - attributes: HTML attributes for the wrapper.
 * - product: The rendered product fields.
 *   Use 'product' to print them all, or print a subset such as
 *   'product.title'. Use the following code to exclude the
 *   printing of a given field:
 *   @code
 *   {{ product|without('title') }}
 *   @endcode
 * - product_entity: The product entity.
 * - product_url: The product URL.
 *
 * @ingroup themeable
 */
#}

{{ attach_library('ws_ecommerce/ws_ecommerce_slick') }}

{%
  set classes = [
  'pb-4',
  'mb-5',
  'overflow-hidden'
]
%}


{# Obtener el url de las imagenes del producto#}
{% set image_urls = [] %}

{% if product.field_imagen["#items"] %}
  {% for item in product.field_imagen["#items"] %}
    {% if item.entity %}
      {% set image_entity = item.entity %}
      {% set image_url = image_entity.uri.value | image_style('producto_interior') %}
      {% set image_url_thum = image_entity.uri.value | image_style('thumbnail') %}
      {% set alt_text = 'imagen de producto' %}

      {# Crear un nuevo objeto con la URL y el texto alternativo #}
      {% set image_info = {
        url: file_url(image_url),
        alt: alt_text,
        url_thum: file_url(image_url_thum)
      } %}

      {# Agregar el objeto al array image_urls #}
      {% set image_urls = image_urls|merge([image_info]) %}
    {% endif %}
  {% endfor %}
{% endif %}

{% set field_precio = product.variation_price["#items"] %}
{% set precio = field_precio.getValue().0["number"] %}
{% set moneda = field_precio.getValue().0["currency_code"] %}

<div class="cont_pag_prod">
  <div class="cont_img_comprar">
    <div class="int_img_cont">
      <div class="sld-wrp">
        <div class="slider-for">
          {% for image_url in image_urls %}
            <div> <img src="{{image_url.url}}"> </div>
          {% endfor%}
        </div>
        <div class="slider-nav">
          {% for image_url_thum in image_urls %}
            <div> <img src="{{image_url_thum.url_thum}}"> </div>
          {% endfor%}
        </div>
      </div>
    </div>

    <div class="int_prod_carr">
      <div class="text_ch"><strong>Lorem ipsum dolor</strong> sit amet, consectetur sed <strong>do eiusmod</strong></div>
        {{product.variations}}    
    </div>

  </div>
  <div class="cont_info">
    <div class="int_titulo">{{product.title}}</div>
    <div class="int_precio"> $ {{ precio|number_format(2, '.', ',') ~ ' ' ~ moneda }}</div>
    <div class="int_categoria">{{product.field_categoria}}</div>
    <div class="int_cuerpo">
      {{product.body}}
    </div>
    
  </div>
</div>




{#
Plantilla por default
<article{{ attributes.addClass(classes) }}>
  <div class="row g-5">
    <div class="col-md-7 order-md-last">
      <div class="mb-2">
        {{- product.product_categories -}}
      </div>
      {{- product.title -}}
      {{- product.brand -}}
      <div class="fs-4">{{- product.variation_price -}}</div>
      <hr/>
      {% if product.special_categories|render is not empty %}
        <div class="mb-3">
          {{- product.special_categories -}}
        </div>
      {% endif %}
      {{- product|without('variation_attributes', 'images', 'variation_images', 'title', 'variation_price', 'product_categories', 'brand', 'special_categories') -}}
    </div>
    <div class="col-md-5">
      {% if product.variation_images|render is not empty %}
        {{- product.variation_images -}}
      {% else %}
        {{- product.images -}}
      {% endif %}
    </div>
  </div>

</article>
#}

